一、函数

　　函数与存储过程相似，也是数据库中存储的已命名PL-SQL程序块。函数的主要特征是它必须有一个返回值。通过return来指定函数的返回类型。在函数的任何地方可以通过return expression语句从函数返回，返回类型必须和声明的返回类型一致。

二、函数和存储过程的优点：

　　1、共同使用的代码可以只需要被编写一次，而被需要该代码的任何应用程序调用（.net,c++,java，也可以使DLL库）。

　　2、这种几种编写、几种维护更新、大家共享的方法，简化了应用程序的开发维护，提高了效率和性能。

　　3、这种模块化的方法使得一个复杂的问题、大的程序逐步简化成几个简单的、小的程序部分，进行分别编写，因此程序的结构更加清晰，简单，也容易实现。

　　4、可以在各个开发者之间提供处理数据、控制流程、提示信息等方面的一致性。

　　5、节省内存空间。它们以一种压缩的形式被存储在外存中，当被调用时才被放入内存进行处理。而且多个用户在调用同一个存储过程或函数时，只需要加载一次即可。

　　6、提高数据的安全性和完整性。通过把一些对数据的操作方到存储过程或函数中，就可以通过是否授予用户有执行该语句的权限，来限制某些用户对数据库进行这些操作。

三、函数和存储过程的区别：

　　1、存储过程用户在数据库中完成特定操作或者任务（如插入，删除等），函数用于返回特定的数据。

　　2、存储过程声明用procedure，函数用function。

　　3、存储过程不需要返回类型，函数必须要返回类型。

　　4、存储过程可作为独立的pl-sql执行，函数不能作为独立的plsql执行，必须作为表达式的一部分。

　　5、存储过程只能通过out和in/out来返回值，函数除了可以使用out，in/out以外，还可以使用return返回值。

　　6、sql语句（DML或SELECT)中不可用调用存储过程，而函数可以。

四、适用场合：

　　1、如果需要返回多个值和不返回值，就使用存储过程；如果只需要返回一个值，就使用函数。

　　2、存储过程一般用于执行一个指定的动作，函数一般用于计算和返回一个值。

　　3、可以再SQL内部调用函数来完成复杂的计算问题，但不能调用存储过程。

五、存储过程与存储函数的区别和联系

　　相同点：1.创建语法结构相似，都可以携带多个传入参数和传出参数。

　　　　      2.都是一次编译，多次执行。

　　不同点：1.存储过程定义关键字用procedure，函数定义用function。

　　　　　　2.存储过程中不能用return返回值，但函数中可以，而且函数中必须有return子句。

　　　　　　3.执行方式略有不同，存储过程的执行方式有两种（1.使用execute2.使用begin和end），函数除了存储过程的两种方式外，还可以当做表达式使用，例如放在select中（select f1() form dual;）。

总结：如果只有一个返回值，用存储函数，否则，一般用存储过程。



存储过程的缺点
（1）开发调试差：无良好的IDE开发工具，存储过程的调试比一般SQL要复杂的多。

（2）可移植性差：由于存储过程将应用程序绑定到数据库上，因此使用存储过程封装业务逻辑将限制应用程序的可移植性。

（3）重新编译问题，因为后端代码是运行前编译的，如果带有引用关系的对象发生改变时，受影响的存储过程、包将需要重新编译（不过也可以设置成运行时刻自动编译）。

（4）如果在一个程序系统中大量的使用存储过程，到程序交付使用的时候随着用户需求的增加会导致数据结构的变化，接着就是系统的相关问题了，最后如果用户想维护该系统可以说是很难很难、而且代价是空前的，维护起来更麻烦。