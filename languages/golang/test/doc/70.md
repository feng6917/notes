每一个socket执行listen时，内核都会自动创建一个半连接队列和全连接队列。

第三次握手前，TCP 连接会放在半连接队列中，直到第三次握手到来，才会被放到全连接队列中。

accept方法只是为了从全连接队列中拿出一条连接，本身跟三次握手几乎毫无关系。

出于效率考虑，虽然都叫队列，但半连接队列其实被设计成了哈希表，而全连接队列本质是链表。

全连接队列满了，再来第三次握手也会丢弃，此时如果tcp_abort_on_overflow=1，还会直接发RST给客户端。

半连接队列满了，可能是因为受到了SYN Flood攻击，可以设置tcp_syncookies，绕开半连接队列。

客户端没有半连接队列和全连接队列，但有一个全局 hash，可以通过它实现自连接或 TCP 同时打开。
