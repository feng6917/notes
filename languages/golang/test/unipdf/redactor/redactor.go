//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package redactor ;import (_cb "errors";_c "fmt";_cc "lgo/test/unipdf/common";_b "lgo/test/unipdf/contentstream";_cf "lgo/test/unipdf/core";_eb "lgo/test/unipdf/creator";_ed "lgo/test/unipdf/extractor";
_a "lgo/test/unipdf/model";_ec "io";_e "regexp";_da "sort";_g "strings";);func (_bef *regexMatcher )match (_fbb string )([]*matchedIndex ,error ){_eggdc :=_bef ._bfbb .Pattern ;if _eggdc ==nil {return nil ,_cb .New ("\u006e\u006f\u0020\u0070at\u0074\u0065\u0072\u006e\u0020\u0063\u006f\u006d\u0070\u0069\u006c\u0065\u0064");
};var (_deac =_eggdc .FindAllStringIndex (_fbb ,-1);_abbc []*matchedIndex ;);for _ ,_efff :=range _deac {_abbc =append (_abbc ,&matchedIndex {_fea :_efff [0],_ccc :_efff [1],_beag :_fbb [_efff [0]:_efff [1]]});};return _abbc ,nil ;};func _dcge (_dee ,_bea string )[]int {if len (_bea )==0{return nil ;
};var _gecg []int ;for _dgcb :=0;_dgcb < len (_dee );{_fff :=_g .Index (_dee [_dgcb :],_bea );if _fff < 0{return _gecg ;};_gecg =append (_gecg ,_dgcb +_fff );_dgcb +=_fff +len (_bea );};return _gecg ;};func _ggca (_bgc ,_aad ,_aabe float64 )float64 {_aabe =_aabe /100;
_gab :=(-1000*_bgc )/(_aad *_aabe );return _gab ;};func _acb (_acbd string ,_ddee []localSpanMarks )([]placeHolders ,error ){_babd :="";_aef :=[]placeHolders {};for _fee ,_ebba :=range _ddee {_dfc :=_ebba ._faf ;_cbe :=_ebba ._cge ;_fab :=_afd (_dfc );
_ade ,_bdcc :=_bfaa (_dfc );if _bdcc !=nil {return nil ,_bdcc ;};if _fab !=_babd {var _dbdc []int ;if _fee ==0&&_cbe !=_fab {_dgef :=_g .Index (_acbd ,_fab );_dbdc =[]int {_dgef };}else if _fee ==len (_ddee )-1{_bba :=_g .LastIndex (_acbd ,_fab );_dbdc =[]int {_bba };
}else {_dbdc =_dcge (_acbd ,_fab );};_eec :=placeHolders {_bc :_dbdc ,_ebe :_fab ,_ebc :_ade };_aef =append (_aef ,_eec );};_babd =_fab ;};return _aef ,nil ;};func _ace (_bbe _cf .PdfObject ,_dcg *_a .PdfFont )(string ,error ){_baf ,_gdc :=_cf .GetStringBytes (_bbe );
if !_gdc {return "",_cf .ErrTypeError ;};_dfb :=_dcg .BytesToCharcodes (_baf );_fge ,_fgf ,_ccaf :=_dcg .CharcodesToStrings (_dfb );if _ccaf > 0{_cc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_fgf ,_ccaf );
};_beg :=_g .Join (_fge ,"");return _beg ,nil ;};type matchedIndex struct{_fea int ;_ccc int ;_beag string ;};type placeHolders struct{_bc []int ;_ebe string ;_ebc float64 ;};func _gb (_be *_b .ContentStreamOperations ,_ga map[_cf .PdfObject ][]localSpanMarks )error {for _f ,_dd :=range _ga {if _f ==nil {continue ;
};_ee ,_ecb ,_bec :=_ggc (_be ,_f );if !_bec {_cc .Log .Debug ("Pd\u0066\u004fb\u006a\u0065\u0063\u0074\u0020\u0025\u0073\u006e\u006ft\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0069\u006e\u0020\u0073\u0069\u0064\u0065\u0020\u0074\u0068\u0065\u0020\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u0073\u0074r\u0065a\u006d\u0020\u006f\u0070\u0065\u0072\u0061\u0074i\u006fn\u0020\u0025s",_f ,_be );
return nil ;};if _ee .Operand =="\u0054\u006a"{_ab :=_dde (_ee ,_f ,_dd );if _ab !=nil {return _ab ;};}else if _ee .Operand =="\u0054\u004a"{_cbd :=_fb (_ee ,_f ,_dd );if _cbd !=nil {return _cbd ;};}else if _ee .Operand =="\u0027"||_ee .Operand =="\u0022"{_bd :=_ebg (_be ,_ee .Operand ,_ecb );
if _bd !=nil {return _bd ;};_bd =_dde (_ee ,_f ,_dd );if _bd !=nil {return _bd ;};};};return nil ;};func _cgb (_gef localSpanMarks ,_cba *_ed .TextMarkArray ,_ccb *_a .PdfFont ,_fbg ,_fbe string )([]_cf .PdfObject ,error ){_eefc :=_afd (_cba );Tj ,_dffa :=_bfaa (_cba );
if _dffa !=nil {return nil ,_dffa ;};_dec :=len (_fbg );_fcf :=len (_eefc );_gcce :=-1;_gca :=_cf .MakeFloat (Tj );if _eefc !=_fbe {_aabb :=_gef ._baga ;if _aabb ==0{_gcce =_g .LastIndex (_fbg ,_eefc );}else {_gcce =_g .Index (_fbg ,_eefc );};}else {_gcce =_g .Index (_fbg ,_eefc );
};_ggaf :=_gcce +_fcf ;_caf :=[]_cf .PdfObject {};if _gcce ==0&&_ggaf ==_dec {_caf =append (_caf ,_gca );}else if _gcce ==0&&_ggaf < _dec {_egb :=_ecc (_fbg [_ggaf :],_ccb );_bcda :=_cf .MakeStringFromBytes (_egb );_caf =append (_caf ,_gca ,_bcda );}else if _gcce > 0&&_ggaf >=_dec {_gec :=_ecc (_fbg [:_gcce ],_ccb );
_efce :=_cf .MakeStringFromBytes (_gec );_caf =append (_caf ,_efce ,_gca );}else if _gcce > 0&&_ggaf < _dec {_bab :=_ecc (_fbg [:_gcce ],_ccb );_dbg :=_ecc (_fbg [_ggaf :],_ccb );_feba :=_cf .MakeStringFromBytes (_bab );_dab :=_cf .MakeString (string (_dbg ));
_caf =append (_caf ,_feba ,_gca ,_dab );};return _caf ,nil ;};type localSpanMarks struct{_faf *_ed .TextMarkArray ;_baga int ;_cge string ;};func _dbd (_fg *_a .PdfFont ,_fega _ed .TextMark )float64 {_feb :=0.001;_ad :=_fega .Th /100;if _fg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_feb =1;
};_fdg ,_cff :=_fg .GetRuneMetrics (' ');if !_cff {_fdg ,_cff =_fg .GetCharMetrics (32);};if !_cff {_fdg ,_ =_a .DefaultFont ().GetRuneMetrics (' ');};_eef :=_feb *((_fdg .Wx *_fega .FontSize +_fega .Tc +_fega .Tw )/_ad );return _eef ;};func _becg (_abgf RedactionTerm )(*regexMatcher ,error ){return &regexMatcher {_bfbb :_abgf },nil };


// RedactionTerm holds the regexp pattern and the replacement string for the redaction process.
type RedactionTerm struct{Pattern *_e .Regexp ;};

// New instantiates a Redactor object with given PdfReader and `regex` pattern.
func New (reader *_a .PdfReader ,opts *RedactionOptions ,rectProps *RectangleProps )*Redactor {if rectProps ==nil {rectProps =RedactRectanglePropsNew ();};return &Redactor {_cfb :reader ,_eag :opts ,_edb :_eb .New (),_bdb :rectProps };};func _egea (_fgfb *_ed .TextMarkArray ,_deb int ,_ecae int )int {_gddf :=_fgfb .Elements ();
_cbeg :=_deb -1;_dca :=_deb +1;_fead :=-1;if _cbeg >=0{_ccbcg :=_gddf [_cbeg ];_fgc :=_ccbcg .ObjString ;_efgg :=len (_fgc );_abgg :=_ccbcg .Index ;if _abgg +1< _efgg {_fead =_cbeg ;return _fead ;};};if _dca < len (_gddf ){_acba :=_gddf [_dca ];_edfg :=_acba .ObjString ;
if _edfg [0]!=_acba .Text {_fead =_dca ;return _fead ;};};return _fead ;};

// RedactRectanglePropsNew return a new pointer to a default RectangleProps object.
func RedactRectanglePropsNew ()*RectangleProps {return &RectangleProps {FillColor :_eb .ColorBlack ,BorderWidth :0.0,FillOpacity :1.0};};func _ddd (_eeg []localSpanMarks )(map[string ][]localSpanMarks ,[]string ){_ebee :=make (map[string ][]localSpanMarks );
_adb :=[]string {};for _ ,_eee :=range _eeg {_gdd :=_eee ._cge ;if _gddd ,_fbf :=_ebee [_gdd ];_fbf {_ebee [_gdd ]=append (_gddd ,_eee );}else {_ebee [_gdd ]=[]localSpanMarks {_eee };_adb =append (_adb ,_gdd );};};return _ebee ,_adb ;};func _fbgc (_fba []*matchedIndex )map[string ][][]int {_aeff :=make (map[string ][][]int );
for _ ,_gebb :=range _fba {_eba :=_gebb ._beag ;_afcf :=[]int {_gebb ._fea ,_gebb ._ccc };if _bage ,_cdb :=_aeff [_eba ];_cdb {_aeff [_eba ]=append (_bage ,_afcf );}else {_aeff [_eba ]=[][]int {_afcf };};};return _aeff ;};type matchedBBox struct{_bbac _a .PdfRectangle ;
_ged string ;};func _afd (_dga *_ed .TextMarkArray )string {_def :="";for _ ,_fdcc :=range _dga .Elements (){_def +=_fdcc .Text ;};return _def ;};

// Redact executes the redact operation on a pdf file and updates the content streams of all pages of the file.
func (_dfa *Redactor )Redact ()error {_cccb ,_fce :=_dfa ._cfb .GetNumPages ();if _fce !=nil {return _c .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064 \u0074\u006f\u0020\u0067\u0065\u0074\u0020\u0074\u0068\u0065\u0020\u006e\u0075m\u0062\u0065\u0072\u0020\u006f\u0066\u0020P\u0061\u0067\u0065\u0073");
};_abb :=_dfa ._bdb .FillColor ;_fcc :=_dfa ._bdb .BorderWidth ;_dba :=_dfa ._bdb .FillOpacity ;for _fbgd :=1;_fbgd <=_cccb ;_fbgd ++{_dae ,_abgb :=_dfa ._cfb .GetPage (_fbgd );if _abgb !=nil {return _abgb ;};_ddb ,_abgb :=_ed .New (_dae );if _abgb !=nil {return _abgb ;
};_fadaf ,_ ,_ ,_abgb :=_ddb .ExtractPageText ();if _abgb !=nil {return _abgb ;};_eggd :=_fadaf .GetContentStreamOps ();_gdde ,_bfg ,_abgb :=_dfa .redactPage (_eggd ,_dae .Resources );if _bfg ==nil {_cc .Log .Info ("N\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0066\u006f\u0072\u0020t\u0068\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065d \u0070\u0061\u0074t\u0061r\u006e\u002e");
_bfg =_eggd ;};_dae .SetContentStreams ([]string {_bfg .String ()},_cf .NewFlateEncoder ());if _abgb !=nil {return _abgb ;};_ddgb ,_abgb :=_dae .GetMediaBox ();if _abgb !=nil {return _abgb ;};if _dae .MediaBox ==nil {_dae .MediaBox =_ddgb ;};if _cffg :=_dfa ._edb .AddPage (_dae );
_cffg !=nil {return _cffg ;};_daba :=_ddgb .Ury ;for _ ,_gddee :=range _gdde {_dbf :=_gddee ._bbac ;_fbcc :=_dfa ._edb .NewRectangle (_dbf .Llx ,_daba -_dbf .Lly ,_dbf .Urx -_dbf .Llx ,-(_dbf .Ury -_dbf .Lly ));_fbcc .SetFillColor (_abb );_fbcc .SetBorderWidth (_fcc );
_fbcc .SetFillOpacity (_dba );if _dgbb :=_dfa ._edb .Draw (_fbcc );_dgbb !=nil {return nil ;};};};_dfa ._edb .SetOutlineTree (_dfa ._cfb .GetOutlineTree ());return nil ;};func _ecc (_abd string ,_becc *_a .PdfFont )[]byte {_cce ,_ceeb :=_becc .StringToCharcodeBytes (_abd );
if _ceeb !=0{_cc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_abd ,_cce );
};return _cce ;};func _bee (_dcd *_ed .TextMarkArray )(_cf .PdfObject ,int ){var _ebf _cf .PdfObject ;_feg :=-1;for _ef ,_af :=range _dcd .Elements (){_ebf =_af .DirectObject ;_feg =_ef ;if _ebf !=nil {break ;};};return _ebf ,_feg ;};func _ggc (_aga *_b .ContentStreamOperations ,PdfObj _cf .PdfObject )(*_b .ContentStreamOperation ,int ,bool ){for _ggag ,_afc :=range *_aga {_babg :=_afc .Operand ;
if _babg =="\u0054\u006a"{_bfbg :=_cf .TraceToDirectObject (_afc .Params [0]);if _bfbg ==PdfObj {return _afc ,_ggag ,true ;};}else if _babg =="\u0054\u004a"{_egc ,_cab :=_cf .GetArray (_afc .Params [0]);if !_cab {return nil ,_ggag ,_cab ;};for _ ,_gcd :=range _egc .Elements (){if _gcd ==PdfObj {return _afc ,_ggag ,true ;
};};}else if _babg =="\u0022"{_ea :=_cf .TraceToDirectObject (_afc .Params [2]);if _ea ==PdfObj {return _afc ,_ggag ,true ;};}else if _babg =="\u0027"{_aabfc :=_cf .TraceToDirectObject (_afc .Params [0]);if _aabfc ==PdfObj {return _afc ,_ggag ,true ;};
};};return nil ,-1,false ;};

// RedactionOptions is a collection of RedactionTerm objects.
type RedactionOptions struct{Terms []RedactionTerm ;};func _gedd (_ccbc []int ,_adg *_ed .TextMarkArray ,_dcb string )(*_ed .TextMarkArray ,matchedBBox ,error ){_dfg :=matchedBBox {};_eaf :=_ccbc [0];_cdd :=_ccbc [1];_abge :=len (_dcb )-len (_g .TrimLeft (_dcb ,"\u0020"));
_dbae :=len (_dcb )-len (_g .TrimRight (_dcb ,"\u0020\u000a"));_eaf =_eaf +_abge ;_cdd =_cdd -_dbae ;_dcb =_g .Trim (_dcb ,"\u0020\u000a");_fdea ,_defb :=_adg .RangeOffset (_eaf ,_cdd );if _defb !=nil {return nil ,_dfg ,_defb ;};_gfc ,_egf :=_fdea .BBox ();
if !_egf {return nil ,_dfg ,_c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_fdea );
};_dfg =matchedBBox {_ged :_dcb ,_bbac :_gfc };return _fdea ,_dfg ,nil ;};type regexMatcher struct{_bfbb RedactionTerm };func _dde (_cef *_b .ContentStreamOperation ,_egg _cf .PdfObject ,_cbg []localSpanMarks )error {var _gga *_cf .PdfObjectArray ;_bfd ,_ff :=_ddd (_cbg );
if len (_ff )==1{_abg :=_ff [0];_ebce :=_bfd [_abg ];if len (_ebce )==1{_gc :=_ebce [0];_cbf :=_gc ._faf ;_cde :=_aab (_cbf );_dcc ,_bcd :=_ace (_egg ,_cde );if _bcd !=nil {return _bcd ;};_aee ,_bcd :=_cgb (_gc ,_cbf ,_cde ,_dcc ,_abg );if _bcd !=nil {return _bcd ;
};_gga =_cf .MakeArray (_aee ...);}else {_efc :=_ebce [0]._faf ;_dccd :=_aab (_efc );_dff ,_gcc :=_ace (_egg ,_dccd );if _gcc !=nil {return _gcc ;};_edff ,_gcc :=_acb (_dff ,_ebce );if _gcc !=nil {return _gcc ;};_aag :=_bfa (_edff );_fad :=_agc (_dff ,_aag ,_dccd );
_gga =_cf .MakeArray (_fad ...);};}else if len (_ff )> 1{_eed :=_cbg [0];_eda :=_eed ._faf ;_ ,_dad :=_bee (_eda );_dadb :=_eda .Elements ()[_dad ];_ba :=_dadb .Font ;_gbac ,_de :=_ace (_egg ,_ba );if _de !=nil {return _de ;};_cg ,_de :=_acb (_gbac ,_cbg );
if _de !=nil {return _de ;};_aabf :=_bfa (_cg );_dgc :=_agc (_gbac ,_aabf ,_ba );_gga =_cf .MakeArray (_dgc ...);};_cef .Params [0]=_gga ;_cef .Operand ="\u0054\u004a";return nil ;};type replacement struct{_ac string ;_ce float64 ;_aa int ;};func _bfaa (_adbc *_ed .TextMarkArray )(float64 ,error ){_bad ,_cdef :=_adbc .BBox ();
if !_cdef {return 0.0,_c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_adbc );
};_afe :=_ca (_adbc );_bade :=0.0;_ ,_adf :=_bee (_adbc );_cgbf :=_adbc .Elements ()[_adf ];_gefd :=_cgbf .Font ;if _afe > 0{_bade =_dbd (_gefd ,_cgbf );};_cga :=(_bad .Urx -_bad .Llx );_cga =_cga +_bade *float64 (_afe );Tj :=_ggca (_cga ,_cgbf .FontSize ,_cgbf .Th );
return Tj ,nil ;};

// WriteToFile writes the redacted document to file specified by `outputPath`.
func (_gcdc *Redactor )WriteToFile (outputPath string )error {if _eccf :=_gcdc ._edb .WriteToFile (outputPath );_eccf !=nil {return _c .Errorf ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0074o\u0020\u0077\u0072\u0069\u0074\u0065\u0020t\u0068\u0065\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0066\u0069\u006c\u0065");
};return nil ;};func _efd (_aaga *_ed .TextMarkArray )[]*_ed .TextMarkArray {_gdf :=_aaga .Elements ();_daa :=len (_gdf );var _ccg _cf .PdfObject ;_cbgd :=[]*_ed .TextMarkArray {};_fbcf :=&_ed .TextMarkArray {};_gea :=-1;for _cdfb ,_fcg :=range _gdf {_add :=_fcg .DirectObject ;
_gea =_fcg .Index ;if _add ==nil {_bbb :=_egea (_aaga ,_cdfb ,_gea );if _ccg !=nil {if _bbb ==-1||_bbb > _cdfb {_cbgd =append (_cbgd ,_fbcf );_fbcf =&_ed .TextMarkArray {};};};}else if _add !=nil &&_ccg ==nil {if _gea ==0&&_cdfb > 0{_cbgd =append (_cbgd ,_fbcf );
_fbcf =&_ed .TextMarkArray {};};}else if _add !=nil &&_ccg !=nil {if _add !=_ccg {_cbgd =append (_cbgd ,_fbcf );_fbcf =&_ed .TextMarkArray {};};};_ccg =_add ;_fbcf .Append (_fcg );if _cdfb ==(_daa -1){_cbgd =append (_cbgd ,_fbcf );};};return _cbgd ;};func (_fdgd *Redactor )redactPage (_adfg *_b .ContentStreamOperations ,_eega *_a .PdfPageResources )([]matchedBBox ,*_b .ContentStreamOperations ,error ){_bbeg ,_ffab :=_ed .NewFromContents (_adfg .String (),_eega );
if _ffab !=nil {return nil ,nil ,_ffab ;};_cec ,_ ,_ ,_ffab :=_bbeg .ExtractPageText ();_adfg =_cec .GetContentStreamOps ();if _ffab !=nil {return nil ,nil ,_ffab ;};_feec :=_cec .Marks ();_acac :=_cec .Text ();_bfgg :=[]matchedBBox {};_badg :=make (map[_cf .PdfObject ][]localSpanMarks );
for _ ,_ccd :=range _fdgd ._eag .Terms {_agce ,_ceg :=_becg (_ccd );if _ceg !=nil {return nil ,nil ,_ceg ;};_beea ,_ceg :=_agce .match (_acac );if _ceg !=nil {return nil ,nil ,_ceg ;};_gda :=_fbgc (_beea );for _cgga ,_aea :=range _gda {_ccec :=[]matchedBBox {};
for _ ,_acbb :=range _aea {_fdcb ,_bbea ,_deab :=_gedd (_acbb ,_feec ,_cgga );if _deab !=nil {return nil ,nil ,_deab ;};_fbga :=_efd (_fdcb );for _cgab ,_gfg :=range _fbga {_afdc :=localSpanMarks {_faf :_gfg ,_baga :_cgab ,_cge :_cgga };_dgaf ,_ :=_bee (_gfg );
if _cad ,_fbed :=_badg [_dgaf ];_fbed {_badg [_dgaf ]=append (_cad ,_afdc );}else {_badg [_dgaf ]=[]localSpanMarks {_afdc };};};_ccec =append (_ccec ,_bbea );};_bfgg =append (_bfgg ,_ccec ...);};};_ffab =_gb (_adfg ,_badg );if _ffab !=nil {return nil ,nil ,_ffab ;
};return _bfgg ,_adfg ,nil ;};

// Write writes the content of `re.creator` to writer of type io.Writer interface.
func (_geb *Redactor )Write (writer _ec .Writer )error {return _geb ._edb .Write (writer )};func _fb (_bdg *_b .ContentStreamOperation ,_becb _cf .PdfObject ,_dcdc []localSpanMarks )error {_ae ,_cca :=_cf .GetArray (_bdg .Params [0]);_bb :=[]_cf .PdfObject {};
if !_cca {_cc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bdg );return _c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_bdg );
};_bed ,_df :=_ddd (_dcdc );if len (_df )==1{_abe :=_df [0];_gbg :=_bed [_abe ];if len (_gbg )==1{_acc :=_gbg [0];_ge :=_acc ._faf ;_cd :=_aab (_ge );_efg ,_ebeb :=_ace (_becb ,_cd );if _ebeb !=nil {return _ebeb ;};_ecg ,_ebeb :=_cgb (_acc ,_ge ,_cd ,_efg ,_abe );
if _ebeb !=nil {return _ebeb ;};for _ ,_gd :=range _ae .Elements (){if _gd ==_becb {_bb =append (_bb ,_ecg ...);}else {_bb =append (_bb ,_gd );};};}else {_ddg :=_gbg [0]._faf ;_edf :=_aab (_ddg );_eg ,_eca :=_ace (_becb ,_edf );if _eca !=nil {return _eca ;
};_abad ,_eca :=_acb (_eg ,_gbg );if _eca !=nil {return _eca ;};_ebb :=_bfa (_abad );_dfd :=_agc (_eg ,_ebb ,_edf );for _ ,_ebcb :=range _ae .Elements (){if _ebcb ==_becb {_bb =append (_bb ,_dfd ...);}else {_bb =append (_bb ,_ebcb );};};};_bdg .Params [0]=_cf .MakeArray (_bb ...);
}else if len (_df )> 1{_aeb :=_dcdc [0];_fde :=_aeb ._faf ;_ ,_bg :=_bee (_fde );_edfc :=_fde .Elements ()[_bg ];_bf :=_edfc .Font ;_dge ,_bdc :=_ace (_becb ,_bf );if _bdc !=nil {return _bdc ;};_efb ,_bdc :=_acb (_dge ,_dcdc );if _bdc !=nil {return _bdc ;
};_beb :=_bfa (_efb );_agd :=_agc (_dge ,_beb ,_bf );for _ ,_gaa :=range _ae .Elements (){if _gaa ==_becb {_bb =append (_bb ,_agd ...);}else {_bb =append (_bb ,_gaa );};};_bdg .Params [0]=_cf .MakeArray (_bb ...);};return nil ;};func _ebg (_dg *_b .ContentStreamOperations ,_aba string ,_ddf int )error {_dgb :=_b .ContentStreamOperations {};
var _fd _b .ContentStreamOperation ;for _db ,_bda :=range *_dg {if _db ==_ddf {if _aba =="\u0027"{_gg :=_b .ContentStreamOperation {Operand :"\u0054\u002a"};_dgb =append (_dgb ,&_gg );_fd .Params =_bda .Params ;_fd .Operand ="\u0054\u006a";_dgb =append (_dgb ,&_fd );
}else if _aba =="\u0022"{_dbb :=_bda .Params [:2];Tc ,Tw :=_dbb [0],_dbb [1];_fe :=_b .ContentStreamOperation {Params :[]_cf .PdfObject {Tc },Operand :"\u0054\u0063"};_dgb =append (_dgb ,&_fe );_fe =_b .ContentStreamOperation {Params :[]_cf .PdfObject {Tw },Operand :"\u0054\u0077"};
_dgb =append (_dgb ,&_fe );_fd .Params =[]_cf .PdfObject {_bda .Params [2]};_fd .Operand ="\u0054\u006a";_dgb =append (_dgb ,&_fd );};};_dgb =append (_dgb ,_bda );};*_dg =_dgb ;return nil ;};

// Redactor represtents a Redactor object.
type Redactor struct{_cfb *_a .PdfReader ;_eag *RedactionOptions ;_edb *_eb .Creator ;_bdb *RectangleProps ;};

// RectangleProps defines properties of the redaction rectangle to be drawn.
type RectangleProps struct{FillColor _eb .Color ;BorderWidth float64 ;FillOpacity float64 ;};func _ca (_cee *_ed .TextMarkArray )int {_dc :=0;_ag :=_cee .Elements ();if _ag [0].Text =="\u0020"{_dc ++;};if _ag [_cee .Len ()-1].Text =="\u0020"{_dc ++;};return _dc ;
};func _bfa (_gdb []placeHolders )[]replacement {_afb :=[]replacement {};for _ ,_bcff :=range _gdb {_bae :=_bcff ._bc ;_fdc :=_bcff ._ebe ;_efcf :=_bcff ._ebc ;for _ ,_eefe :=range _bae {_cffc :=replacement {_ac :_fdc ,_ce :_efcf ,_aa :_eefe };_afb =append (_afb ,_cffc );
};};_da .Slice (_afb ,func (_eff ,_eea int )bool {return _afb [_eff ]._aa < _afb [_eea ]._aa });return _afb ;};func _aab (_ece *_ed .TextMarkArray )*_a .PdfFont {_ ,_ddgd :=_bee (_ece );_bfb :=_ece .Elements ()[_ddgd ];_fc :=_bfb .Font ;return _fc ;};func _agc (_cfg string ,_bbg []replacement ,_ada *_a .PdfFont )[]_cf .PdfObject {_ffa :=[]_cf .PdfObject {};
_ggb :=0;_ddfb :=_cfg ;for _cdf ,_cbc :=range _bbg {_fbc :=_cbc ._aa ;_ggd :=_cbc ._ce ;_fgde :=_cbc ._ac ;_bag :=_cf .MakeFloat (_ggd );_fag :=_cfg [_ggb :_fbc ];_aca :=_ecc (_fag ,_ada );_gf :=_cf .MakeStringFromBytes (_aca );_ffa =append (_ffa ,_gf );
_ffa =append (_ffa ,_bag );_fada :=_fbc +len (_fgde );_ddfb =_cfg [_fada :];_ggb =_fada ;if _cdf ==len (_bbg )-1{_aca =_ecc (_ddfb ,_ada );_gf =_cf .MakeStringFromBytes (_aca );_ffa =append (_ffa ,_gf );};};return _ffa ;};